---
sidebar_position: 5
---

# Package Manager Comparison

This document provides a comprehensive comparison of the three C++ package managers tested in our POCs: **vcpkg**, **Conan**, and **CPM**.

## Executive Summary

| Package Manager | Best For | Avoid If |
|-----------------|----------|----------|
| **vcpkg** | Fast builds, Windows/VS, team simplicity | Complex cross-compilation |
| **Conan** | Advanced configs, cross-compilation, enterprise | Quick prototypes, modern compilers |
| **CPM** | Prototypes, minimal setup, learning | Production, many dependencies |

## Detailed Comparison Table

### Installation & Setup

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **Installation** | Bootstrap script | `pip install conan` | Download single file |
| **Dependencies** | Git, CMake | Python, pip, CMake | Git, CMake |
| **Setup Time** | ~2 minutes | ~1 minute | ~10 seconds |
| **Global Config** | `VCPKG_ROOT` env var | Profile detection | None needed |
| **Complexity** | ‚≠ê‚≠ê‚≠ê‚≠ê Easy | ‚≠ê‚≠ê‚≠ê Moderate | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Trivial |

### Dependency Management

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **Manifest File** | `vcpkg.json` | `conanfile.txt`/`.py` | `CMakeLists.txt` |
| **Version Pinning** | Baseline + version refs | Semver with ranges | Git tags/branches/commits |
| **Lockfile** | `vcpkg-configuration.json` | `conan.lock` | None (Git commits) |
| **Transitive Deps** | ‚úÖ Automatic | ‚úÖ Automatic | ‚úÖ Automatic |
| **Dependency Install** | Automatic (manifest mode) | Manual (`conan install`) | Automatic (CMake) |
| **Package Count** | 2000+ | 1000+ | Unlimited (Git) |

### Build System Integration

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **CMake Integration** | Toolchain file | Generated toolchain | Native `CPMAddPackage()` |
| **Toolchain Setup** | Manual or preset | Generated by Conan | None needed |
| **Find Packages** | `find_package()` | `find_package()` | Direct target names |
| **Multi-config** | Via triplets | Native support | CMake standard |
| **Presets Support** | ‚úÖ Excellent | ‚úÖ Excellent | ‚úÖ Excellent |

### Build Performance

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **First Build** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Fast (binaries) | ‚≠ê‚≠ê‚≠ê‚≠ê Medium (varies) | ‚≠ê‚≠ê Slow (source) |
| **Subsequent Builds** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Very fast | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Very fast | ‚≠ê‚≠ê‚≠ê‚≠ê Fast (cached) |
| **After Clean** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Fast (cache) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Fast (cache) | ‚≠ê‚≠ê Slow (rebuild) |
| **Binary Availability** | ‚úÖ Usually available | ‚ö†Ô∏è Configuration-dependent | ‚ùå Never (source only) |
| **Build from Source** | Optional (`--build`) | Optional (`--build=missing`) | Always |
| **Typical SFML Build** | 10-30 seconds | 30s - 30 minutes | 10-20 minutes |

### Platform Support

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **Windows** | ‚úÖ Excellent | ‚úÖ Good | ‚úÖ Good |
| **Linux** | ‚úÖ Excellent | ‚úÖ Good | ‚úÖ Excellent |
| **macOS** | ‚úÖ Excellent | ‚úÖ Good | ‚úÖ Excellent |
| **Cross-compilation** | ‚≠ê‚≠ê‚≠ê Good (triplets) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent | ‚≠ê‚≠ê‚≠ê Depends |
| **Embedded** | ‚≠ê‚≠ê‚≠ê Limited | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent | ‚≠ê‚≠ê Limited |
| **System Dependencies** | ‚ö†Ô∏è Some manual setup | ‚ö†Ô∏è Many manual setups | ‚ö†Ô∏è Manual setup |

### Compiler Support

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **GCC 15+** | ‚úÖ Good support | ‚ùå Often fails | ‚úÖ Source builds work |
| **Clang 19+** | ‚úÖ Good support | ‚ùå Often fails | ‚úÖ Source builds work |
| **MSVC Latest** | ‚úÖ Excellent | ‚úÖ Good | ‚úÖ Good |
| **Older Compilers** | ‚úÖ Good | ‚úÖ Excellent | ‚úÖ Good |
| **Custom Toolchains** | ‚≠ê‚≠ê‚≠ê Triplets | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Profiles | ‚≠ê‚≠ê‚≠ê‚≠ê CMake |

### Advanced Features

| Feature | vcpkg | Conan | CPM |
|---------|-------|-------|-----|
| **Private Registries** | ‚≠ê‚≠ê‚≠ê Possible | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Easy | ‚≠ê‚≠ê‚≠ê Git-based |
| **Custom Packages** | ‚≠ê‚≠ê‚≠ê Ports | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Python recipes | ‚≠ê‚≠ê‚≠ê‚≠ê Git repos |
| **Binary Caching** | ‚úÖ Built-in | ‚úÖ Artifactory support | ‚ùå Not supported |
| **Dependency Overrides** | ‚≠ê‚≠ê‚≠ê Limited | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Full control | ‚≠ê‚≠ê‚≠ê Limited |
| **Build Options** | ‚≠ê‚≠ê‚≠ê Features | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Full control | ‚≠ê‚≠ê‚≠ê‚≠ê CMake options |
| **Versioning Flexibility** | ‚≠ê‚≠ê‚≠ê Baselines | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Ranges | ‚≠ê‚≠ê‚≠ê‚≠ê Git refs |

### Developer Experience

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **Learning Curve** | ‚≠ê‚≠ê‚≠ê‚≠ê Easy | ‚≠ê‚≠ê‚≠ê Moderate | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Very easy |
| **Documentation** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent | ‚≠ê‚≠ê‚≠ê‚≠ê Good | ‚≠ê‚≠ê‚≠ê Basic |
| **Error Messages** | ‚≠ê‚≠ê‚≠ê‚≠ê Clear | ‚≠ê‚≠ê Cryptic | ‚≠ê‚≠ê‚≠ê‚≠ê Clear |
| **IDE Support** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê VS, VSCode | ‚≠ê‚≠ê‚≠ê‚≠ê Plugins | ‚≠ê‚≠ê‚≠ê‚≠ê CMake-based |
| **Debugging Issues** | ‚≠ê‚≠ê‚≠ê‚≠ê Easy | ‚≠ê‚≠ê Difficult | ‚≠ê‚≠ê‚≠ê‚≠ê Easy |
| **Community** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Large | ‚≠ê‚≠ê‚≠ê‚≠ê Active | ‚≠ê‚≠ê‚≠ê Growing |

### Enterprise & CI/CD

| Aspect | vcpkg | Conan | CPM |
|--------|-------|-------|-----|
| **GitHub Actions** | ‚úÖ Native support | ‚úÖ Good support | ‚úÖ CMake caching |
| **Azure DevOps** | ‚úÖ Excellent | ‚úÖ Good | ‚úÖ Standard CMake |
| **GitLab CI** | ‚úÖ Good | ‚úÖ Good | ‚úÖ Good |
| **Binary Artifacts** | ‚úÖ vcpkg binary cache | ‚úÖ Artifactory | ‚ùå Build from source |
| **Reproducibility** | ‚≠ê‚≠ê‚≠ê‚≠ê Baselines | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Lockfiles | ‚≠ê‚≠ê‚≠ê Git commits |
| **Cache Sharing** | ‚úÖ Global cache | ‚úÖ Per-profile cache | ‚úÖ Global cache |

## POC Results Summary

### vcpkg POC
- ‚úÖ **Status**: Successful
- ‚è±Ô∏è **Build Time**: 10-30 seconds (pre-compiled binaries)
- üí° **Experience**: Smooth, fast, reliable
- ‚ö†Ô∏è **Issues**: None significant

### Conan POC
- ‚ùå **Status**: Failed on Fedora 42 (GCC 15.2.1)
- ‚è±Ô∏è **Build Time**: 20-30 minutes before failure
- üí° **Experience**: Complex, verbose, frustrating
- ‚ö†Ô∏è **Issues**: Modern compiler incompatibility, missing system deps, cryptic errors

### CPM POC
- ‚úÖ **Status**: Successful
- ‚è±Ô∏è **Build Time**: 10-15 minutes (built from source)
- üí° **Experience**: Simple setup, slow initial build
- ‚ö†Ô∏è **Issues**: Long compilation time

## Real-World Metrics

### Initial Setup Time
```
CPM:    < 1 minute   (download one file)
vcpkg:  ~2 minutes   (clone + bootstrap)
Conan:  ~1 minute    (pip install + profile detect)
```

### First SFML Build
```
vcpkg:  10-30s       (download pre-compiled binaries)
Conan:  30s - 30min  (depends on binary availability)
CPM:    10-20min     (compile from source)
```

### Disk Space (SFML + deps)
```
vcpkg:  ~200 MB      (shared cache)
Conan:  ~300 MB      (per-profile cache)
CPM:    ~150 MB      (source + build artifacts)
```

## Decision Matrix

### For R-Type Project

| Criterion | Weight | vcpkg | Conan | CPM |
|-----------|--------|-------|-------|-----|
| Build Speed | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 10/10 | 7/10 | 4/10 |
| Setup Simplicity | ‚≠ê‚≠ê‚≠ê‚≠ê | 8/10 | 6/10 | 10/10 |
| Team Experience | ‚≠ê‚≠ê‚≠ê‚≠ê | 9/10 | 5/10 | 7/10 |
| Cross-platform | ‚≠ê‚≠ê‚≠ê‚≠ê | 8/10 | 9/10 | 7/10 |
| Reliability | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 9/10 | 6/10 | 8/10 |
| Future-proofing | ‚≠ê‚≠ê‚≠ê | 8/10 | 9/10 | 6/10 |
| **Weighted Total** | | **8.7/10** | **6.8/10** | **6.9/10** |

## Recommendations by Use Case

### Quick Prototype / POC
```
1st: CPM     (instant setup, no tools)
2nd: vcpkg   (fast builds if vcpkg installed)
3rd: Conan   (too complex for prototypes)
```

### Team Project (Windows-focused)
```
1st: vcpkg   (VS integration, fast builds)
2nd: Conan   (if cross-compilation needed)
3rd: CPM     (not for production)
```

### Team Project (Multi-platform)
```
1st: vcpkg   (good balance)
2nd: Conan   (if max flexibility needed)
3rd: CPM     (build time prohibitive)
```

### Enterprise / Complex Requirements
```
1st: Conan   (maximum flexibility)
2nd: vcpkg   (if simpler needs)
3rd: CPM     (not suitable)
```

### Educational / Learning
```
1st: CPM     (simplest, CMake-native)
2nd: vcpkg   (good docs, easy)
3rd: Conan   (more complex)
```

### Embedded / Cross-compilation
```
1st: Conan   (excellent toolchain support)
2nd: vcpkg   (custom triplets)
3rd: CPM     (limited support)
```

## Final Recommendation for R-Type

### Primary Choice: **vcpkg**

**Rationale:**
- ‚úÖ Fast iteration with pre-compiled binaries
- ‚úÖ Easy onboarding for new team members
- ‚úÖ Excellent Windows/Linux support
- ‚úÖ Strong ecosystem and documentation
- ‚úÖ Reliable builds on modern compilers
- ‚úÖ Active Microsoft support

**Setup:**
```bash
# One-time setup
git clone https://github.com/Microsoft/vcpkg.git
./vcpkg/bootstrap-vcpkg.sh
export VCPKG_ROOT=/path/to/vcpkg

# Project workflow
cmake --preset vcpkg-release
cmake --build --preset vcpkg-release
```

### Secondary Choice: **CPM** (for prototyping)

Use CPM for:
- Quick POCs and experiments
- Feature prototypes
- Learning new libraries

**Don't use for:**
- Main project dependencies
- Production builds
- CI/CD pipelines

### Avoid: **Conan** (for now)

**Reasons:**
- ‚ùå Failed on modern systems in POC
- ‚ùå Unreliable with latest compilers
- ‚ùå Complex setup and debugging
- ‚ùå Long, verbose builds

**When to reconsider:**
- Team gains Conan expertise
- Project needs advanced cross-compilation
- ConanCenter packages mature for modern compilers

## Migration Path

If starting with vcpkg and later needing Conan:

1. **Phase 1**: Use vcpkg for primary dependencies
2. **Phase 2**: Evaluate specific Conan needs (cross-compilation, etc.)
3. **Phase 3**: Gradual migration with hybrid approach
4. **Phase 4**: Full Conan if justified by requirements

Both use CMake, so switching is feasible.

## Conclusion

**vcpkg** emerges as the clear winner for the R-Type project due to:
- Superior developer experience
- Faster builds and iteration
- Better reliability on modern systems
- Lower learning curve for team

**CPM** is valuable for prototyping but not production.

**Conan** has powerful features but is too unreliable for our current needs.

## Additional Resources

### vcpkg
- [Official Documentation](https://vcpkg.io/)
- [Package Registry](https://vcpkg.io/en/packages.html)
- [GitHub Repository](https://github.com/microsoft/vcpkg)

### Conan
- [Official Documentation](https://docs.conan.io/)
- [ConanCenter](https://conan.io/center/)
- [GitHub Repository](https://github.com/conan-io/conan)

### CPM
- [GitHub Repository](https://github.com/cpm-cmake/CPM.cmake)
- [Wiki Documentation](https://github.com/cpm-cmake/CPM.cmake/wiki)
- [Example Projects](https://github.com/cpm-cmake/CPM.cmake/wiki/More-Snippets)
